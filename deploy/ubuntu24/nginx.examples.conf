# Example 1: dedicate a domain/subdomain to Jmaka (recommended)
# Paste INSIDE your existing server { ... } for that domain.
# Replace PORT with the port you used in install.sh (default 5010).

# client_max_body_size 80m;
#
# # Root install (PATH_PREFIX=/)
# location / {
#     proxy_redirect off;
#     proxy_intercept_errors off;
#     proxy_pass         http://127.0.0.1:PORT;
#     proxy_http_version 1.1;
#
#     proxy_set_header   Upgrade $http_upgrade;
#     proxy_set_header   Connection keep-alive;
#     proxy_set_header   Host $host;
#     proxy_cache_bypass $http_upgrade;
#     proxy_set_header   X-Real-IP $remote_addr;
#     proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header   X-Forwarded-Proto $scheme;
# }


# Example 2: install into a sub-path (PATH_PREFIX=/jmaka/)
# IMPORTANT:
# - this location MUST be above any catch-all `location / { ... }`
# - NO trailing slash in proxy_pass (to keep /jmaka/ prefix in the upstream request)

# client_max_body_size 80m;
#
# location /jmaka {
#     return 301 /jmaka/;
# }
#
# location /jmaka/ {
#     proxy_redirect off;
#     proxy_intercept_errors off;
#
#     # App must be configured with: JMAKA_BASE_PATH=/jmaka
#     proxy_pass         http://127.0.0.1:PORT;
#     proxy_http_version 1.1;
#
#     proxy_set_header   Upgrade $http_upgrade;
#     proxy_set_header   Connection keep-alive;
#     proxy_set_header   Host $host;
#     proxy_cache_bypass $http_upgrade;
#     proxy_set_header   X-Real-IP $remote_addr;
#     proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header   X-Forwarded-Proto $scheme;
# }


# Example 3: separate server block (HTTP)
# server {
#     listen 80;
#     server_name jmaka.example.com;
#
#     client_max_body_size 80m;
#
#     location / {
#         proxy_redirect off;
#         proxy_pass http://127.0.0.1:PORT;
#         proxy_http_version 1.1;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }
