@page
@{
    Layout = null;
}
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jmaka</title>
  <link rel="stylesheet" href="~/app.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/features/videoedit/style.css" asp-append-version="true" />
</head>
<body>
  <main class="page">
    <section class="uploader" aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞">
      <!-- Left Panel -->
      <div class="left-panel">
        <!-- Logo at the top -->
        <div class="ascii-logo-container">
          <pre id="asciiArt" class="ascii-art"></pre>
          <span class="version-badge" data-version>v0.5.2</span>
        </div>

        <!-- Upload button and languages HORIZONTALLY -->
        <div class="upload-and-language">
          <!-- Upload button on the left -->
          <button class="save-btn" id="saveBtn" type="button" aria-label="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            <div class="save-icon" aria-hidden="true">
              <svg class="save-arrow" viewBox="0 0 64 64" focusable="false">
                <path d="M32 8v22" fill="none" stroke="currentColor" stroke-width="6" stroke-linecap="round" />
                <path d="M20 24l12 12 12-12" fill="none" stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <svg class="save-disk" viewBox="0 0 64 64" focusable="false">
                <path d="M10 8h34l10 10v38H10V8zm6 6v12h26V14H16zm0 20v16h32V34H16zm6-16h12v6H22v-6z" />
              </svg>
            </div>
            <div class="save-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
          </button>

          <!-- Language switcher on the right -->
          <div id="languageSwitcher" class="language-switcher" aria-label="Language selector">
            <button id="langRuBtn" class="lang-btn" type="button" data-lang="ru" aria-pressed="false">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
            <button id="langEnBtn" class="lang-btn" type="button" data-lang="en-US" aria-pressed="false">üá∫üá∏ English</button>
            <button id="langEsBtn" class="lang-btn" type="button" data-lang="es-ES" aria-pressed="false">üá™üá∏ Espa√±ol</button>
          </div>
        </div>
      </div>

      <!-- Right Panel -->
      <div class="preview-wrap">
        <div class="main-controls" aria-label="–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è">
          <div class="tool-buttons" aria-label="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã">
            <div class="tool-row">
              <button id="splitToolBtn" class="btn tool-btn" type="button">Split</button>
              <button id="split3ToolBtn" class="btn tool-btn" type="button">Split3</button>
              <button id="oknoFixToolBtn" class="btn tool-btn" type="button">OknoFix</button>
              <button id="oknoScaleToolBtn" class="btn tool-btn" type="button">OknoScale</button>
            </div>
            <div class="tool-row">
              <button id="cropToolBtn" class="btn tool-btn" type="button">Crop</button>
              <button id="imageEditToolBtn" class="btn tool-btn" type="button">Edit</button>
              <button id="videoEditToolBtn" class="btn tool-btn video-edit" type="button">Video Edit<span class="excl" aria-hidden="true">‚ùó</span></button>
            </div>
          </div>

          <div id="sizeButtons" class="size-buttons" aria-label="–†–∞–∑–º–µ—Ä—ã">
            <button class="size-btn" type="button" data-w="2440" disabled>2440</button>
            <button class="size-btn" type="button" data-w="1920" disabled>1920</button>
            <button class="size-btn" type="button" data-w="1280" disabled>1280</button>
          </div>
        </div>

        <div id="hint" class="hint">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–∏—Å–∫–µ—Ç—É, –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ ‚Äî –∏ –æ–Ω–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è.</div>
        <button id="helpBtn" class="help-btn" type="button" aria-label="–°–ø—Ä–∞–≤–∫–∞">?</button>
      </div>

      <input id="fileInput" class="file-input" type="file" accept="image/*" multiple />
      <input id="videoInput" class="file-input" type="file" accept="video/*" hidden />
    </section>

    <div class="tables-wrap" aria-label="–¢–∞–±–ª–∏—Ü—ã —Ñ–∞–π–ª–æ–≤">
      <div class="links-wrap" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Ñ–∞–π–ª–æ–≤">
        <div class="links-title">Original / Crop / Sizes</div>
        <div class="table-wrap">
          <table class="files-table" aria-label="–ì–æ—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã">
            <thead>
              <tr>
                <th class="col-dt">–î–∞—Ç–∞ - –≤—Ä–µ–º—è</th>
                <th class="col-orig">–û—Ä–∏–≥–∏–Ω–∞–ª</th>
                <th class="col-crop">Crop</th>
                <th class="col-size">1280</th>
                <th class="col-size">1920</th>
                <th class="col-size">2440</th>
                <th class="col-del"></th>
              </tr>
            </thead>
            <tbody id="filesTbody"></tbody>
          </table>
        </div>
      </div>

      <div class="links-wrap composites-wrap" aria-label="–¢–∞–±–ª–∏—Ü–∞ Split">
      <div class="links-title">Split / Split3 / OknoFix / OknoScale / Edits</div>
        <div class="table-wrap">
          <table class="files-table" aria-label="Split / Split3">
            <thead>
              <tr>
                <th class="col-dt">–î–∞—Ç–∞ - –≤—Ä–µ–º—è</th>
                <th class="col-kind">–¢–∏–ø</th>
                <th class="col-comp">–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                <th class="col-del"></th>
              </tr>
            </thead>
            <tbody id="compositesTbody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <pre id="result" class="result" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç" hidden></pre>
    
    <footer style="text-align: center; padding: 10px; font-size: 11px; color: #64748b; opacity: 0.7;">
      Jmaka v<span data-version>0.5.2</span>
    </footer>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
  <div id="deleteModal" class="modal" hidden>
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="–£–¥–∞–ª–µ–Ω–∏–µ">
      <div class="modal-header">
        <div class="modal-title-wrap">
          <div class="modal-title">–£–¥–∞–ª–µ–Ω–∏–µ</div>
          <div class="modal-sub">
            <span class="modal-subtext">–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ?</span>
          </div>
        </div>
        <button id="deleteClose" class="modal-x" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="modal-body">
        <label class="checkbox-row">
          <input id="deleteSkipConfirm" type="checkbox" />
          <span>–ë–æ–ª—å—à–µ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å (—É–¥–∞–ª—è—Ç—å —Å—Ä–∞–∑—É)</span>
        </label>
      </div>
      <div class="modal-footer">
        <div class="modal-hint">–ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ, –æ—á–∏—Å—Ç–∏–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤ LocalStorage.</div>
        <div class="modal-actions">
          <button id="deleteCancel" class="btn" type="button">–û—Ç–º–µ–Ω–∞</button>
          <button id="deleteConfirm" class="btn danger" type="button">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
  <div id="viewerModal" class="modal" hidden>
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card viewer-card" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
      <div class="modal-header">
        <div class="modal-title-wrap">
          <div class="modal-title">–ü—Ä–æ—Å–º–æ—Ç—Ä</div>
          <div class="modal-sub">
            <span id="viewerLabel" class="modal-subtext"></span>
            <a id="viewerOpen" class="modal-sublink" href="#" target="_blank" rel="noreferrer" hidden>–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</a>
          </div>
        </div>
        <button id="viewerClose" class="modal-x" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="modal-body viewer-body">
        <img id="viewerImg" class="viewer-img" alt="" />
      </div>
    </div>
  </div>

  <partial name="Features/_SplitModal" />
  <partial name="Features/_OknoFixModal" />
  <partial name="Features/_OknoScaleModal" />
  <partial name="Features/_ImageEditModal" />
  <partial name="Features/_VideoEditModal" />
  <partial name="Features/_Split3Modal" />
  <partial name="Features/_CropModal" />
  <div id="helpModal" class="modal" hidden>
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card help-card" role="dialog" aria-modal="true" aria-label="–°–ø—Ä–∞–≤–∫–∞ –ø–æ Jmaka">
      <div class="modal-header">
        <div class="modal-title-wrap">
          <div class="modal-title">–°–ø—Ä–∞–≤–∫–∞ –ø–æ Jmaka</div>
          <div class="modal-sub">
            <span class="modal-subtext">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º, —Å—Ç–∞—Ç—É—Å–∞–º –∏ –±—ã—Å—Ç—Ä—ã–º –¥–µ–π—Å—Ç–≤–∏—è–º.</span>
          </div>
        </div>
        <button id="helpClose" class="modal-x" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="modal-body help-body">
        <div class="help-intro">
          <p class="help-lead"><strong>Jmaka</strong> ‚Äî —Ä–∞–±–æ—á–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ.</p>
          <div class="help-chip-row">
            <span class="help-chip">RU / EN / ES</span>
            <span class="help-chip">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è + –≤–∏–¥–µ–æ</span>
            <span class="help-chip">–ò—Å—Ç–æ—Ä–∏—è + –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞</span>
          </div>
        </div>

        <div class="help-grid">
          <section class="help-section">
            <h3>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
            <ul>
              <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É-–¥–∏—Å–∫–µ—Ç—É, –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ (Ctrl+V).</li>
              <li>–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É: —Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏–ª–∏ –∏—Å–ø–∞–Ω—Å–∫–∏–π.</li>
              <li>–ö–ª–∏–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–µ–ª–∞–µ—Ç –µ—ë –∞–∫—Ç–∏–≤–Ω–æ–π –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.</li>
            </ul>
          </section>

          <section class="help-section">
            <h3>–§–∞–π–ª—ã –∏ —Ç–∞–±–ª–∏—Ü—ã</h3>
            <ul>
              <li>–°–ª–µ–≤–∞: Original / Crop / —Ä–∞–∑–º–µ—Ä—ã 1280, 1920, 2440.</li>
              <li>–°–ø—Ä–∞–≤–∞: –∏—Å—Ç–æ—Ä–∏—è Split, Split3, OknoFix, OknoScale, Edit –∏ Video Edit.</li>
              <li>–õ—é–±–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å, —Å–∫–∞—á–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å.</li>
            </ul>
          </section>

          <section class="help-section">
            <h3>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h3>
            <ul>
              <li><strong>Crop</strong> ‚Äî –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ (1:1, 2:3, 16:9).</li>
              <li><strong>Split / Split3</strong> ‚Äî –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ 2 –∏–ª–∏ 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ 1280√ó720 —Å –±–µ–ª—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏.</li>
              <li><strong>OknoFix / OknoScale</strong> ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –º–∞—Å—à—Ç–∞–±–æ–º –ø–æ–¥ —à–∞–±–ª–æ–Ω.</li>
              <li><strong>Edit</strong> ‚Äî —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–∞, —Å–≤–µ—Ç–∞, –¥–µ—Ç–∞–ª–µ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–∞–∫ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞.</li>
            </ul>
          </section>

          <section class="help-section">
            <h3>Video Edit</h3>
            <ul>
              <li>Trim —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏, Crop, Rotate, Flip, Speed, Mute –∏ Reset.</li>
              <li>Overlay Upload: –∑–∞–≥—Ä—É–∑–∫–∞ PNG/WebP/JPEG —à–∞–±–ª–æ–Ω–∞ –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ.</li>
              <li>Vidcov —Ä–µ–∂–∏–º –∏ –±—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ª–∏–º–∏—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ (Episod 10/20/30 MB).</li>
              <li>–°—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—á–µ—Ä–µ–¥—å, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è.</li>
            </ul>
          </section>

          <section class="help-section help-section-wide">
            <h3>–ü–æ–ª–µ–∑–Ω—ã–µ –º–µ–ª–æ—á–∏</h3>
            <ul>
              <li>–°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –∏ —Ñ–∞–π–ª—ã –æ—á–∏—â–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è.</li>
              <li>–ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Ç–æ–ª—å–∫–æ —á—Ç–æ, –Ω–∞–∂–º–∏—Ç–µ Refresh –≤ Video Edit –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</li>
              <li>–ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ.</li>
            </ul>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Load ascii-art.js before feature scripts since shared/core depends on window.getRandomAsciiArt -->
  <script src="~/ascii-art.js" asp-append-version="true"></script>
  <script src="~/features/shared/core.js" asp-append-version="true"></script>
  <script src="~/features/split/tool.js" asp-append-version="true"></script>
  <script src="~/features/split3/tool.js" asp-append-version="true"></script>
  <script src="~/features/oknofix/tool.js" asp-append-version="true"></script>
  <script src="~/features/oknoscale/tool.js" asp-append-version="true"></script>
  <script src="~/features/crop/tool.js" asp-append-version="true"></script>
  <script src="~/features/edit/tool.js" asp-append-version="true"></script>
  <script src="~/features/videoedit/tool.js" asp-append-version="true"></script>
</body>
</html>
